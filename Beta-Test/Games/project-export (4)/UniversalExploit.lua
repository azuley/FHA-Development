-- Universal Roblox Exploit Script
-- Created by Mika
-- Compatible with most executors (Synapse, KRNL, ScriptWare, etc.)

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

-- Player
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Configuration
local Config = {
    Version = "2.1.0",
    Author = "Mika",
    DefaultKeybind = Enum.KeyCode.RightControl,
    UITheme = "Dark",
    SaveSettings = true
}

-- Exploit Features Library
local ExploitLib = {
    FlyEnabled = false,
    NoclipEnabled = false,
    SpeedEnabled = false,
    JumpPowerEnabled = false,
    InfiniteJumpEnabled = false,
    ESPEnabled = false,
    AimlockEnabled = false,
    GodModeEnabled = false,
    AntiAfkEnabled = false
}

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "UniversalExploitUI"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.DisplayOrder = 999
ScreenGui.ResetOnSpawn = false

if syn and syn.protect_gui then
    syn.protect_gui(ScreenGui)
    ScreenGui.Parent = CoreGui
elseif gethui then
    ScreenGui.Parent = gethui()
elseif CoreGui then
    ScreenGui.Parent = CoreGui
end

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 500, 0, 400)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.ClipsDescendants = true

local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 8)
Corner.Parent = MainFrame

local Shadow = Instance.new("ImageLabel")
Shadow.Name = "Shadow"
Shadow.Size = UDim2.new(1, 20, 1, 20)
Shadow.Position = UDim2.new(0, -10, 0, -10)
Shadow.BackgroundTransparency = 1
Shadow.Image = "rbxassetid://1316045217"
Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
Shadow.ImageTransparency = 0.5
Shadow.ScaleType = Enum.ScaleType.Slice
Shadow.SliceCenter = Rect.new(10, 10, 118, 118)
Shadow.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
TitleBar.BorderSizePixel = 0

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 8)
TitleCorner.Parent = TitleBar

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(0, 200, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "Universal Exploit v" .. Config.Version
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -40, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 16
CloseButton.Font = Enum.Font.GothamBold

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 6)
CloseCorner.Parent = CloseButton

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui.Enabled = not ScreenGui.Enabled
end)

CloseButton.Parent = TitleBar
TitleBar.Parent = MainFrame

-- Tab System
local TabButtonsFrame = Instance.new("Frame")
TabButtonsFrame.Name = "TabButtonsFrame"
TabButtonsFrame.Size = UDim2.new(0, 120, 0, 300)
TabButtonsFrame.Position = UDim2.new(0, 10, 0, 50)
TabButtonsFrame.BackgroundTransparency = 1

local Tabs = {
    "Main",
    "Player",
    "Visuals",
    "Teleport",
    "Misc",
    "Settings"
}

local TabFrames = {}
local CurrentTab = "Main"

for i, tabName in ipairs(Tabs) do
    -- Tab Button
    local TabButton = Instance.new("TextButton")
    TabButton.Name = tabName .. "Tab"
    TabButton.Size = UDim2.new(1, 0, 0, 40)
    TabButton.Position = UDim2.new(0, 0, 0, (i-1)*45)
    TabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    TabButton.Text = tabName
    TabButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    TabButton.TextSize = 14
    TabButton.Font = Enum.Font.Gotham
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 6)
    ButtonCorner.Parent = TabButton
    
    TabButton.MouseButton1Click:Connect(function()
        CurrentTab = tabName
        for _, frame in pairs(TabFrames) do
            frame.Visible = false
        end
        TabFrames[tabName].Visible = true
        
        for _, btn in pairs(TabButtonsFrame:GetChildren()) do
            if btn:IsA("TextButton") then
                btn.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
                btn.TextColor3 = Color3.fromRGB(200, 200, 200)
            end
        end
        TabButton.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    end)
    
    TabButton.Parent = TabButtonsFrame
    
    -- Tab Content Frame
    local TabFrame = Instance.new("Frame")
    TabFrame.Name = tabName .. "Frame"
    TabFrame.Size = UDim2.new(0, 350, 0, 300)
    TabFrame.Position = UDim2.new(0, 140, 0, 50)
    TabFrame.BackgroundTransparency = 1
    TabFrame.Visible = (tabName == "Main")
    
    TabFrames[tabName] = TabFrame
    TabFrame.Parent = MainFrame
end

-- Main Tab Content
local MainFrameContent = TabFrames["Main"]

local WelcomeLabel = Instance.new("TextLabel")
WelcomeLabel.Size = UDim2.new(1, 0, 0, 40)
WelcomeLabel.Position = UDim2.new(0, 0, 0, 10)
WelcomeLabel.BackgroundTransparency = 1
WelcomeLabel.Text = "Welcome to Universal Exploit"
WelcomeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
WelcomeLabel.TextSize = 20
WelcomeLabel.Font = Enum.Font.GothamBold
WelcomeLabel.Parent = MainFrameContent

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Size = UDim2.new(1, 0, 0, 30)
StatusLabel.Position = UDim2.new(0, 0, 0, 60)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "Status: Ready"
StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
StatusLabel.TextSize = 16
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.Parent = MainFrameContent

-- Fly Toggle
local FlyToggle = Instance.new("TextButton")
FlyToggle.Size = UDim2.new(0, 150, 0, 40)
FlyToggle.Position = UDim2.new(0, 0, 0, 100)
FlyToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
FlyToggle.Text = "Fly: OFF"
FlyToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyToggle.TextSize = 14
FlyToggle.Font = Enum.Font.Gotham

local FlyCorner = Instance.new("UICorner")
FlyCorner.CornerRadius = UDim.new(0, 6)
FlyCorner.Parent = FlyToggle

FlyToggle.MouseButton1Click:Connect(function()
    ExploitLib.FlyEnabled = not ExploitLib.FlyEnabled
    FlyToggle.Text = "Fly: " .. (ExploitLib.FlyEnabled and "ON" or "OFF")
    FlyToggle.BackgroundColor3 = ExploitLib.FlyEnabled and Color3.fromRGB(80, 180, 80) or Color3.fromRGB(60, 60, 70)
    
    if ExploitLib.FlyEnabled then
        activateFly()
    else
        deactivateFly()
    end
end)

FlyToggle.Parent = MainFrameContent

-- Noclip Toggle
local NoclipToggle = Instance.new("TextButton")
NoclipToggle.Size = UDim2.new(0, 150, 0, 40)
NoclipToggle.Position = UDim2.new(0, 160, 0, 100)
NoclipToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
NoclipToggle.Text = "Noclip: OFF"
NoclipToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipToggle.TextSize = 14
NoclipToggle.Font = Enum.Font.Gotham

local NoclipCorner = Instance.new("UICorner")
NoclipCorner.CornerRadius = UDim.new(0, 6)
NoclipCorner.Parent = NoclipToggle

NoclipToggle.MouseButton1Click:Connect(function()
    ExploitLib.NoclipEnabled = not ExploitLib.NoclipEnabled
    NoclipToggle.Text = "Noclip: " .. (ExploitLib.NoclipEnabled and "ON" or "OFF")
    NoclipToggle.BackgroundColor3 = ExploitLib.NoclipEnabled and Color3.fromRGB(80, 180, 80) or Color3.fromRGB(60, 60, 70)
end)

NoclipToggle.Parent = MainFrameContent

-- Speed Slider
local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Size = UDim2.new(0, 150, 0, 30)
SpeedLabel.Position = UDim2.new(0, 0, 0, 150)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.Text = "WalkSpeed: 16"
SpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedLabel.TextSize = 14
SpeedLabel.Font = Enum.Font.Gotham
SpeedLabel.Parent = MainFrameContent

local SpeedSlider = Instance.new("TextBox")
SpeedSlider.Size = UDim2.new(0, 150, 0, 30)
SpeedSlider.Position = UDim2.new(0, 0, 0, 180)
SpeedSlider.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
SpeedSlider.Text = "16"
SpeedSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedSlider.TextSize = 14
SpeedSlider.Font = Enum.Font.Gotham
SpeedSlider.PlaceholderText = "Enter speed value"

local SpeedCorner = Instance.new("UICorner")
SpeedCorner.CornerRadius = UDim.new(0, 6)
SpeedCorner.Parent = SpeedSlider

SpeedSlider.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local speed = tonumber(SpeedSlider.Text)
        if speed and speed > 0 and speed <= 500 then
            LocalPlayer.Character:WaitForChild("Humanoid").WalkSpeed = speed
            SpeedLabel.Text = "WalkSpeed: " .. tostring(speed)
        else
            SpeedSlider.Text = "16"
        end
    end
end)

SpeedSlider.Parent = MainFrameContent

-- JumpPower Slider
local JumpLabel = Instance.new("TextLabel")
JumpLabel.Size = UDim2.new(0, 150, 0, 30)
JumpLabel.Position = UDim2.new(0, 160, 0, 150)
JumpLabel.BackgroundTransparency = 1
JumpLabel.Text = "JumpPower: 50"
JumpLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
JumpLabel.TextSize = 14
JumpLabel.Font = Enum.Font.Gotham
JumpLabel.Parent = MainFrameContent

local JumpSlider = Instance.new("TextBox")
JumpSlider.Size = UDim2.new(0, 150, 0, 30)
JumpSlider.Position = UDim2.new(0, 160, 0, 180)
JumpSlider.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
JumpSlider.Text = "50"
JumpSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
JumpSlider.TextSize = 14
JumpSlider.Font = Enum.Font.Gotham
JumpSlider.PlaceholderText = "Enter jump power"

local JumpCorner = Instance.new("UICorner")
JumpCorner.CornerRadius = UDim.new(0, 6)
JumpCorner.Parent = JumpSlider

JumpSlider.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local jump = tonumber(JumpSlider.Text)
        if jump and jump > 0 and jump <= 500 then
            LocalPlayer.Character:WaitForChild("Humanoid").JumpPower = jump
            JumpLabel.Text = "JumpPower: " .. tostring(jump)
        else
            JumpSlider.Text = "50"
        end
    end
end)

JumpSlider.Parent = MainFrameContent

-- Infinite Jump Toggle
local InfJumpToggle = Instance.new("TextButton")
InfJumpToggle.Size = UDim2.new(0, 150, 0, 40)
InfJumpToggle.Position = UDim2.new(0, 0, 0, 220)
InfJumpToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
InfJumpToggle.Text = "Infinite Jump: OFF"
InfJumpToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
InfJumpToggle.TextSize = 14
InfJumpToggle.Font = Enum.Font.Gotham

local InfJumpCorner = Instance.new("UICorner")
InfJumpCorner.CornerRadius = UDim.new(0, 6)
InfJumpCorner.Parent = InfJumpToggle

InfJumpToggle.MouseButton1Click:Connect(function()
    ExploitLib.InfiniteJumpEnabled = not ExploitLib.InfiniteJumpEnabled
    InfJumpToggle.Text = "Infinite Jump: " .. (ExploitLib.InfiniteJumpEnabled and "ON" or "OFF")
    InfJumpToggle.BackgroundColor3 = ExploitLib.InfiniteJumpEnabled and Color3.fromRGB(80, 180, 80) or Color3.fromRGB(60, 60, 70)
end)

InfJumpToggle.Parent = MainFrameContent

-- ESP Toggle
local ESPToggle = Instance.new("TextButton")
ESPToggle.Size = UDim2.new(0, 150, 0, 40)
ESPToggle.Position = UDim2.new(0, 160, 0, 220)
ESPToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
ESPToggle.Text = "ESP: OFF"
ESPToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPToggle.TextSize = 14
ESPToggle.Font = Enum.Font.Gotham

local ESPCorner = Instance.new("UICorner")
ESPCorner.CornerRadius = UDim.new(0, 6)
ESPCorner.Parent = ESPToggle

ESPToggle.MouseButton1Click:Connect(function()
    ExploitLib.ESPEnabled = not ExploitLib.ESPEnabled
    ESPToggle.Text = "ESP: " .. (ExploitLib.ESPEnabled and "ON" or "OFF")
    ESPToggle.BackgroundColor3 = ExploitLib.ESPEnabled and Color3.fromRGB(80, 180, 80) or Color3.fromRGB(60, 60, 70)
    
    if ExploitLib.ESPEnabled then
        activateESP()
    else
        deactivateESP()
    end
end)

ESPToggle.Parent = MainFrameContent

-- Player Tab Content
local PlayerFrame = TabFrames["Player"]

local PlayerList = Instance.new("ScrollingFrame")
PlayerList.Size = UDim2.new(1, -20, 0, 200)
PlayerList.Position = UDim2.new(0, 10, 0, 10)
PlayerList.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
PlayerList.BorderSizePixel = 0
PlayerList.ScrollBarThickness = 6

local PlayerListLayout = Instance.new("UIListLayout")
PlayerListLayout.Padding = UDim.new(0, 5)
PlayerListLayout.Parent = PlayerList

PlayerList.Parent = PlayerFrame

local TeleportButton = Instance.new("TextButton")
TeleportButton.Size = UDim2.new(0, 150, 0, 40)
TeleportButton.Position = UDim2.new(0, 10, 0, 220)
TeleportButton.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
TeleportButton.Text = "Teleport to Player"
TeleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportButton.TextSize = 14
TeleportButton.Font = Enum.Font.Gotham

local TeleportCorner = Instance.new("UICorner")
TeleportCorner.CornerRadius = UDim.new(0, 6)
TeleportCorner.Parent = TeleportButton

TeleportButton.Parent = PlayerFrame

-- Visuals Tab Content
local VisualsFrame = TabFrames["Visuals"]

local FullbrightToggle = Instance.new("TextButton")
FullbrightToggle.Size = UDim2.new(0, 150, 0, 40)
FullbrightToggle.Position = UDim2.new(0, 10, 0, 10)
FullbrightToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
FullbrightToggle.Text = "Fullbright: OFF"
FullbrightToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
FullbrightToggle.TextSize = 14
FullbrightToggle.Font = Enum.Font.Gotham

local FullbrightCorner = Instance.new("UICorner")
FullbrightCorner.CornerRadius = UDim.new(0, 6)
FullbrightCorner.Parent = FullbrightToggle

FullbrightToggle.Parent = VisualsFrame

local ChamsToggle = Instance.new("TextButton")
ChamsToggle.Size = UDim2.new(0, 150, 0, 40)
ChamsToggle.Position = UDim2.new(0, 170, 0, 10)
ChamsToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
ChamsToggle.Text = "Chams: OFF"
ChamsToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
ChamsToggle.TextSize = 14
ChamsToggle.Font = Enum.Font.Gotham

local ChamsCorner = Instance.new("UICorner")
ChamsCorner.CornerRadius = UDim.new(0, 6)
ChamsCorner.Parent = ChamsToggle

ChamsToggle.Parent = VisualsFrame

-- Teleport Tab Content
local TeleportFrame = TabFrames["Teleport"]

local TeleportLocations = {
    {"Spawn", Vector3.new(0, 5, 0)},
    {"High Point", Vector3.new(0, 100, 0)},
    {"Far Away", Vector3.new(1000, 50, 1000)}
}

for i, location in ipairs(TeleportLocations) do
    local TpButton = Instance.new("TextButton")
    TpButton.Size = UDim2.new(0, 150, 0, 40)
    TpButton.Position = UDim2.new(0, 10, 0, 10 + (i-1)*50)
    TpButton.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
    TpButton.Text = "TP to " .. location[1]
    TpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    TpButton.TextSize = 14
    TpButton.Font = Enum.Font.Gotham
    
    local TpCorner = Instance.new("UICorner")
    TpCorner.CornerRadius = UDim.new(0, 6)
    TpCorner.Parent = TpButton
    
    TpButton.MouseButton1Click:Connect(function()
        local char = LocalPlayer.Character
        if char then
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = CFrame.new(location[2])
            end
        end
    end)
    
    TpButton.Parent = TeleportFrame
end

-- Settings Tab Content
local SettingsFrame = TabFrames["Settings"]

local KeybindLabel = Instance.new("TextLabel")
KeybindLabel.Size = UDim2.new(0, 150, 0, 30)
KeybindLabel.Position = UDim2.new(0, 10, 0, 10)
KeybindLabel.BackgroundTransparency = 1
KeybindLabel.Text = "UI Toggle Key: RightControl"
KeybindLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
KeybindLabel.TextSize = 14
KeybindLabel.Font = Enum.Font.Gotham
KeybindLabel.Parent = SettingsFrame

local SaveSettingsToggle = Instance.new("TextButton")
SaveSettingsToggle.Size = UDim2.new(0, 150, 0, 40)
SaveSettingsToggle.Position = UDim2.new(0, 10, 0, 50)
SaveSettingsToggle.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
SaveSettingsToggle.Text = "Save Settings: ON"
SaveSettingsToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
SaveSettingsToggle.TextSize = 14
SaveSettingsToggle.Font = Enum.Font.Gotham

local SaveCorner = Instance.new("UICorner")
SaveCorner.CornerRadius = UDim.new(0, 6)
SaveCorner.Parent = SaveSettingsToggle

SaveSettingsToggle.MouseButton1Click:Connect(function()
    Config.SaveSettings = not Config.SaveSettings
    SaveSettingsToggle.Text = "Save Settings: " .. (Config.SaveSettings and "ON" or "OFF")
    SaveSettingsToggle.BackgroundColor3 = Config.SaveSettings and Color3.fromRGB(60, 180, 80) or Color3.fromRGB(180, 60, 60)
end)

SaveSettingsToggle.Parent = SettingsFrame

-- Add all frames to ScreenGui
MainFrame.Parent = ScreenGui

-- Keybind Toggle
local UIVisible = true

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed then
        if input.KeyCode == Config.DefaultKeybind then
            ScreenGui.Enabled = not ScreenGui.Enabled
            UIVisible = ScreenGui.Enabled
        end
        
        -- Infinite Jump
        if ExploitLib.InfiniteJumpEnabled and input.KeyCode == Enum.KeyCode.Space then
            local char = LocalPlayer.Character
            if char then
                local humanoid = char:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                end
            end
        end
    end
end)

-- Fly Function
local flyBodyVelocity
local flyBodyGyro

function activateFly()
    local char = LocalPlayer.Character
    if not char then return end
    
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    flyBodyVelocity = Instance.new("BodyVelocity")
    flyBodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
    flyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
    flyBodyVelocity.P = 10000
    flyBodyVelocity.Parent = hrp
    
    flyBodyGyro = Instance.new("BodyGyro")
    flyBodyGyro.MaxTorque = Vector3.new(40000, 40000, 40000)
    flyBodyGyro.P = 10000
    flyBodyGyro.D = 100
    flyBodyGyro.Parent = hrp
    
    local flySpeed = 50
    
    local flyConnection
    flyConnection = RunService.Heartbeat:Connect(function()
        if not ExploitLib.FlyEnabled or not char or not hrp then
            flyConnection:Disconnect()
            return
        end
        
        local camera = workspace.CurrentCamera
        if not camera then return end
        
        flyBodyGyro.CFrame = camera.CFrame
        
        local velocity = Vector3.new(0, 0, 0)
        
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            velocity = velocity + (camera.CFrame.LookVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            velocity = velocity - (camera.CFrame.LookVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            velocity = velocity - (camera.CFrame.RightVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            velocity = velocity + (camera.CFrame.RightVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
            velocity = velocity + Vector3.new(0, flySpeed, 0)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
            velocity = velocity - Vector3.new(0, flySpeed, 0)
        end
        
        flyBodyVelocity.Velocity = velocity
    end)
end

function deactivateFly()
    if flyBodyVelocity then
        flyBodyVelocity:Destroy()
        flyBodyVelocity = nil
    end
    if flyBodyGyro then
        flyBodyGyro:Destroy()
        flyBodyGyro = nil
    end
end

-- ESP Function
local ESPObjects = {}

function activateESP()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            createESP(player)
        end
    end
    
    Players.PlayerAdded:Connect(function(player)
        if ExploitLib.ESPEnabled then
            createESP(player)
        end
    end)
    
    Players.PlayerRemoving:Connect(function(player)
        if ESPObjects[player] then
            for _, obj in pairs(ESPObjects[player]) do
                obj:Destroy()
            end
            ESPObjects[player] = nil
        end
    end)
end

function createESP(player)
    local character = player.Character or player.CharacterAdded:Wait()
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "ESP_Highlight"
    highlight.FillColor = Color3.fromRGB(255, 50, 50)
    highlight.FillTransparency = 0.5
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.OutlineTransparency = 0
    highlight.Parent = character
    
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_Billboard"
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = character
    
    local espLabel = Instance.new("TextLabel")
    espLabel.Size = UDim2.new(1, 0, 1, 0)
    espLabel.BackgroundTransparency = 1
    espLabel.Text = player.Name
    espLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    espLabel.TextSize = 14
    espLabel.Font = Enum.Font.GothamBold
    espLabel.Parent = billboard
    
    ESPObjects[player] = {highlight, billboard}
end

function deactivateESP()
    for _, objects in pairs(ESPObjects) do
        for _, obj in pairs(objects) do
            obj:Destroy()
        end
    end
    ESPObjects = {}
end

-- Noclip Loop
local noclipConnection
noclipConnection = RunService.Stepped:Connect(function()
    if ExploitLib.NoclipEnabled then
        local char = LocalPlayer.Character
        if char then
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end
end)

-- Anti-AFK
local antiAfkConnection
function activateAntiAFK()
    antiAfkConnection = RunService.Heartbeat:Connect(function()
        if ExploitLib.AntiAfkEnabled then
            local vu = game:GetService("VirtualUser")
            vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            wait(1)
            vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        end
    end)
end

-- Update Player List
function updatePlayerList()
    for _, child in pairs(PlayerList:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    for _, player in pairs(Players:GetPlayers()) do
        local playerButton = Instance.new("TextButton")
        playerButton.Size = UDim2.new(1, -10, 0, 30)
        playerButton.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
        playerButton.Text = player.Name .. (player == LocalPlayer and " (You)" or "")
        playerButton.TextColor3 = player == LocalPlayer and Color3.fromRGB(100, 200, 255) or Color3.fromRGB(255, 255, 255)
        playerButton.TextSize = 12
        playerButton.Font = Enum.Font.Gotham
        
        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 4)
        buttonCorner.Parent = playerButton
        
        playerButton.MouseButton1Click:Connect(function()
            -- Select player for teleport
            TeleportButton.Text = "TP to: " .. player.Name
            TeleportButton.MouseButton1Click:Connect(function()
                local targetChar = player.Character
                local myChar = LocalPlayer.Character
                if targetChar and myChar then
                    local targetHRP = targetChar:FindFirstChild("HumanoidRootPart")
                    local myHRP = myChar:FindFirstChild("HumanoidRootPart")
                    if targetHRP and myHRP then
                        myHRP.CFrame = targetHRP.CFrame
                    end
                end
            end)
        end)
        
        playerButton.Parent = PlayerList
    end
end

-- Initialize
updatePlayerList()
Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)

-- Finalize
StatusLabel.Text = "Status: Loaded Successfully"

-- Notify user
print("Universal Exploit v" .. Config.Version .. " loaded successfully!")
print("Press " .. tostring(Config.DefaultKeybind) .. " to toggle UI")
print("Created by Mika")

-- Return ScreenGui for external control if needed
return ScreenGui